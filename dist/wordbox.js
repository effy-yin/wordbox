!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.dodoroy=e():t.dodoroy=e()}(window,function(){return function(t){var e={};function i(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);i(2);var r=class{constructor(t,e){return this.options=Object.assign({},{isLead:!1,leadWord:null,words:null,colors:["#cc5b34","#c27c4d"],isFixedWidth:!0,width:1e3,height:200},e),this.$wrapper=$(t),!(!this.$wrapper||this.options.words.length<1)&&(this.words=[],this.colors=[],this.colorPos=0,this._create(),this._bindListener(),this)}_create(){this.options.isLead&&this.options.leadWord?this.words=[this.options.leadWord,...this._randArray(this.options.words)]:this.words=this._randArray(this.options.words),this.options.isFixedWidth?(this.$wrapper.width(this.options.width),this.$wrapper.height(this.options.height)):(this.$wrapper.width(this.$wrapper.parent().width()),this.$wrapper.height(this.$wrapper.parent().height())),this.fillRect(this.$wrapper,0,0,this.$wrapper.width(),this.$wrapper.height(),this.words)}fillRect(t,e,i,r,o,s){let n=s.length,h=r/o,p=this._randRange(1,2,.5),l=Math.round(n*p[0]),a=n-l;if(1!=n)if(0==l?(l=1,a--):0==a&&(a=1,l--),h>=2.5){let n=Math.round(r*p[0]),h=r-n;this.fillRect(t,e,i,n,o,s.slice(0,l)),this.fillRect(t,e+n,i,h,o,s.slice(l))}else{let n=Math.round(o*p[0]);this.fillRect(t,e,i,r,n,s.slice(0,l)),this.fillRect(t,e,i+n,r,o-n,s.slice(l))}else this._createBox(t,e,i,r,o,s[0],this._getNextColor())}_createBox(t,e,i,r,o,s,n){let h=o,p=0,l=this._getWordsWidth(s.title);if(l>r){let t=Math.ceil(l/r);h=parseInt(this.$wrapper.css("font-size")),o-=p=Math.max(0,(o-t*h)/2)}let a='<div class="box" style="width:'+r+"px;height:"+o+"px;line-height:"+h+"px;top:"+i+"px;left:"+e+"px;background-color:"+n+";"+(p?"padding-top:"+p+"px;":"")+'"><a href="'+s.url+'" >'+s.title+"</a></div>";$(t).append(a)}_randRange(t,e,i){let r=t/e,o=r*(1-i),s=r*(1+i),n=Math.random()*(s-o)+o;return 1==e?[t]:[n].concat(this._randRange(t-n,e-1,i))}_getNextColor(){let t=this.options.colors[this.colorPos%this.options.colors.length];return this.colorPos++,t}_getWordsWidth(t){return $("#get_ww").length<1&&$('<div id="get_ww" style="display:block;visibility:hidden;font-size:'+this.$wrapper.css("font-size")+'px"><span></span></div>').appendTo("body"),$("#get_ww span").html(t),$("#get_ww span").width()}_randArray(t){let e,i=t.slice(),r=[];for(let o=0,s=t.length;o<s;o++){e=Math.floor(Math.random()*i.length);let t=i[0];i[0]=i[e],i[e]=t,r.push(i[0]),i=i.slice(1)}return r}_bindListener(){if(!this.options.isFixedWidth){let t=this,e=null;$(window).bind("resize",function(){e&&(clearTimeout(window.timer),e=null),e=setTimeout(function(){t.$wrapper.width()==t.$wrapper.parent().width()&&t.$wrapper.height()==t.$wrapper.parent().height()||(t.$wrapper.width(t.$wrapper.parent().width()),t.$wrapper.height(t.$wrapper.parent().height()),t.$wrapper.empty(),t.fillRect(t.$wrapper,0,0,t.$wrapper.width(),t.$wrapper.height(),t.words))},800)})}}};i.d(e,"WordBox",function(){return r}),$.fn.wordbox=function(t){return new r(this,t)?$(this):(console.log("创建失败"),null)}},,function(t,e,i){}])});
//# sourceMappingURL=wordbox.js.map